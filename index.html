<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BWSC Data Logger — Dashboard</title>
    <style>
      body { margin:0; font-family: system-ui, sans-serif; background: linear-gradient(160deg, #e0f2fe, #f0fdfa); color:#0f172a; display:flex; align-items:center; justify-content:center; height:100vh; }
      .card { background:#fff; border-radius:1rem; box-shadow:0 6px 24px rgba(0,0,0,.1); padding:2rem 3rem; max-width:480px; text-align:center; }
      h1 { font-size:1.6rem; margin-bottom:1rem; }
      .stat { font-size:1.2rem; margin:.6rem 0; }
      .note { margin-top:1.5rem; font-size:.9rem; color:#475569; }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>BWSC Data Logger</h1>
      <div id="stats">
        <div class="stat">Fetched <span id="count">—</span> times</div>
        <div class="stat"><span id="mb">—</span> MB of data gathered</div>
      </div>
      <div class="note">Analysis is currently WIP. Stand by…</div>
    </div>

    <script>
      async function getStats() {
        let count = 0, bytes = 0;
        try {
          const res = await fetch('./data/');
          if (!res.ok) throw new Error('no dir listing');
          const text = await res.text();
          // NOTE: GitHub Pages doesn’t serve dir listings. This is placeholder.
        } catch(e) {
          // fallback: estimate from NDJSON file if present
          try {
            const today = new Date().toISOString().slice(0,10);
            const file = `data/day-${today}.ndjson`;
            const r = await fetch(file);
            if (r.ok) {
              const blob = await r.blob();
              bytes = blob.size;
              const txt = await r.text();
              count = txt.trim().split("\n").length;
            }
          } catch {}
        }
        document.getElementById('count').textContent = count || '0';
        document.getElementById('mb').textContent = (bytes/1024/1024).toFixed(2);
      }

      getStats();
    </script>
  </body>
</html>
